# ⭐ Пригодилось - поставь звездочку ⭐
# SquadJS-Playtime-Role-Ban

![Screenshot_10](https://github.com/user-attachments/assets/97f94820-555e-4635-9fd8-cbdf1e71cbe5)

![Screenshot_11](https://github.com/user-attachments/assets/be61deb1-b67f-4a08-94a7-f88d201efb3e)

Скрипт для SquadJS, задача которого - заблокировать роль для игрока если его общее время в игре меньше чем требуется для роли

Блокировка роли происходит путём удаления игрока из отряда (роль в таком случае сбрасывается)

**Работоспособность проверена на версии SquadJS 4.1.0**

# Основные фишки

- Запрос суммарного времени игроков через API Steam
- Блокировка неограниченного количества ролей по времени в игре через регулярные выражения любой сложности
- Блокирование лидерства в скваде (squad leader) до определенного времени в игре 
- Работа начиная с выставленного порога игроков на сервере
- Показ игроку заблокированных для него ролей при входе на сервер и через команду **!blocked** (по умолчанию)
- Ручное обновление времени игрока через команду **!update** (по умолчанию), на случай если игрок открыл свой профиль находясь на сервере
- Показ игроку его суммарного времени в игре при входе на сервер

# Установка 

- Скачайте репозиторий 

```
git clone https://github.com/ar1ocker/SquadJS-Playtime-Role-Ban
```
- Примените патч new-emit.patch находясь в папке `<путь до squadjs на сервере>/`

```
git apply <путь до файла patch> --verbose
```

# Настройка

В основном аналогична любым другим плагинам для SquadJS, но вам нужен будет API ключ от аккаунта steam, чтобы получать время игры пользователей которые заходят на сервер.

**КЛЮЧ ОТ АККАУНТА STEAM ЛУЧШЕ БРАТЬ ОТ ПУСТОГО АККАУНТА, КЛЮЧ ИМЕЕТ СЛИШКОМ МНОГО ПРАВ, ЕСЛИ УКРАДУТ - БУДЕТ НЕПРИЯТНО**

**Steam позволяет получать API ключ только для аккаунтов у которых если на счету 5 евро либо суммарная цена игр - 5 евро**

Получить API ключ можно на [steam dev](https://steamcommunity.com/dev/apikey)

Если пользователь скрыл своё время в игре - скрипт попросить открыть профиль
